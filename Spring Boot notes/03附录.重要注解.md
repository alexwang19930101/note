# 重要注解与属性绑定

## 1.`@ConfigurationProperties`

### 1.1 yaml文件属性注入

```java
/**
 * @ConfigurationProperties将配置文件中的值进行映射
 * prefix = "person"说明在配置文件中的前缀
 * 这个bean也需要交给spring IOC容器管理
 *
 */
@Component
@ConfigurationProperties(prefix = "person")
public class Person{
    ...
}
```
为需要注入属性的bean添加注解(还需要添加**`spring-boot-configuration-processor`**的pom依赖处理这个注解)

```yaml
person:
  lastName: samier
  age: 15
  boss: false
  birth: 2007/11/11
  maps: {k1: v1,k2: v2}
  lists:
    - lisi
    - wangwu
  dog:
    name: aily
    age: 12
```

在application.yaml中添加上述类容

### 1.1 yaml文件属性注入

在application.properties添加以下内容

```properties
person.last-name=张三
person.age=12
person.boss=false
person.birth=2011/1/1
person.lists=1,2,3
person.maps.k1=v1
person.maps.k2=v2
person.dog.name=ali
person.dog.age=11
```



以上两种方式实质是相同的，但是yaml的数据结构阅读起来更加清晰。另外spring底层注解@Value也可以注入属性，不过每个去标记比较麻烦。

|          | @ConfigurationProperties                           | @Value   |
| -------- | -------------------------------------------------- | -------- |
| 注入     | 批量注入                                           | 单个注入 |
| 松散语法 | 自动转换（驼峰  \|\|  **-**分隔  \|\|  **_**分隔） | 不支持   |
| SpEL     | 不支持                                             | 支持     |
| JSR303   | 支持                                               | 不支持   |
| 复杂类型 | 支持（Map List等）                                 | 不支持   |



